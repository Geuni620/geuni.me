---
date: "2025-03-29"
title: "Vite에서 AMD 모듈 사용하기"
category: ["개발"]
summary: "Vite에서 jquery-ui의 AMD 모듈을 사용하는 방법"
short: true
---

최근 CRA가 [deprecated](https://react.dev/blog/2025/02/14/sunsetting-create-react-app)되었다.  
나는 프로덕트를 Vite로 전환하는 도중 이 소식을 들었다.

현재는 Vite로 전환 및 디자인시스템 1차 적용을 완료했다.  
과정에서 한 가지 기록하고 싶은 내용이 있어서 적어본다.

우리 프로덕트의 Grid 라이브러리는 AUI-Grid라는 유료 라이브러리를 사용 중이다.  
AUI-Grid는 내부적으로 date-picker를 사용하는데, CRA에서 잘 동작하던 date-picker가 Vite로 전환한 뒤 동작하지 않았다.  
명확히 말하자면 로컬환경에서는 잘 동작하지만, 배포를 했을 때 동작하지 않는 것이다.

<br />

아래의 코드는 기존 CRA에서 잘 동작하던 코드이다.

```html
<!-- jquery-ui css -->
<link
  rel="stylesheet"
  href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css"
/>

<!-- jquery-ui js -->
<script src="https://code.jquery.com/jquery-3.6.0.js"></script>
<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
```

<br />

하지만 Vite에서는 다음과 같이 작성해야한다.

```html {11-16}
<!-- jQuery-ui css -->
<link
  rel="stylesheet"
  href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css"
/>

<!-- jQuery-ui js -->
<script src="https://code.jquery.com/jquery-3.6.0.js"></script>
<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>

<!-- 모듈 사용 -->
<script type="module">
  $(document).ready(function () {
    $(".datepicker").datepicker();
  });
</script>
```

<br />

원인을 파악해보던 중, 다음과 같은 글을 발견했다.

[Vite를 사용해야 하는 이유](https://ko.vite.dev/guide/why.html)

> 콜드 스타트 방식으로 개발 서버를 구동할 때, 번들러 기반의 도구의 경우 애플리케이션 내 모든 소스 코드에 대해 크롤링 및 빌드 작업을 마쳐야지만이 실제 페이지를 제공할 수 있습니다.

위 콜드 스타트 방식으로 개발 서버를 구동할 때는 웹팩의 방식이다.  
즉 기존에는 '애플리케이션 내 모든 소스 코드에 대해 크롤링 및 빌드 작업을 마쳐야지만이 실제 페이지를 제공'했다.

<br />

하지만 Vite는 빌드 시,

### 참고자료

[JavaScript 표준을 위한 움직임: CommonJS와 AMD](https://d2.naver.com/helloworld/12864)  
[Issues using jQuery UI with Vite #2123](https://github.com/jquery/jquery-ui/issues/2123)  
[How to use jQuery UI with vite in laravel 9 #9415](https://github.com/vitejs/vite/discussions/9415)
