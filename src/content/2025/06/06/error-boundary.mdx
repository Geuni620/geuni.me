---
date: "2025-06-07"
title: "Error Boundary ì»´í¬ë„ŒíŠ¸"
category: ["ê°œë°œ"]
summary: "Error Boundary ì»´í¬ë„ŒíŠ¸ë¥¼ ì§ì ‘ ë§Œë“¤ì–´ë³´ê³ , ë¡œê·¸ë¥¼ ì°ì–´ë³´ë©° ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•´ë³´ë ¤ê³  í•œë‹¤."
---

import { SandpackWrapper } from "@/components/sandpack";
import { SideNote } from "@/components/layout";
import {
  ERROR_BOUNDARY_NOT_SETTING_RESET_KEYS,
  ERROR_BOUNDARY_SETTING_RESET_KEYS,
} from "./file";

ì§€ê¸ˆê¹Œì§€ëŠ” [react-error-boundary](https://github.com/bvaughn/react-error-boundary)ë¥¼ ì‚¬ìš©í•´ì„œ Error Boundary(ì´í•˜ ì—ëŸ¬ë°”ìš´ë”ë¦¬) ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í–ˆì—ˆë‹¤.

ì´ë²ˆ ê¸€ì—ì„œëŠ” ì˜ì¡´ì„± ì—†ì´ ì—ëŸ¬ë°”ìš´ë”ë¦¬ë¥¼ í•˜ë‚˜ì”© ëœ¯ì–´ë³´ì.

---

## ì—ëŸ¬ë°”ìš´ë”ë¦¬ ìƒëª…ì£¼ê¸°

[React ê³µì‹ë¬¸ì„œ](https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary)ì—ì„œ ì œê³µí•˜ëŠ” ì—ëŸ¬ë°”ìš´ë”ë¦¬ ì˜ˆì‹œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

```jsx
// ErrorBoundary.tsx
export class ErrorBoundary extends React.Component<
  React.PropsWithChildren,
  { hasError: boolean }
> {
  constructor(props: React.PropsWithChildren) {
    super(props);
    this.state = { hasError: false };
  }

  static getDerivedStateFromError(error: Error) {
    console.log("getDerivedStateFromError", error);

    return { hasError: true };
  }

  componentDidCatch(error: Error, info: React.ErrorInfo) {
    console.log("componentDidCatch", error, info);
  }

  render() {
    if (this.state.hasError) {
      return <div>ì—ëŸ¬ê°€ ë°œìƒí–ˆì–´ìš”.</div>;
    }

    return this.props.children;
  }
}

// App.tsx
function Bomb({ shouldThrow }: { shouldThrow: boolean }) {
  if (shouldThrow) {
    throw new Error("ğŸ’¥ íŠ¹ì • ì¡°ê±´ì—ì„œ ë°œìƒí•œ ì—ëŸ¬!");
  }

  return null;
}

function RouteComponent() {
  const data = Route.useLoaderData();

  return (
    <ErrorBoundary>
      <div className="flex flex-col items-center justify-center h-full">
        <Bomb />
        <DataTable data={data.data} columns={columns} />
      </div>
    </ErrorBoundary>
  );
}
```

ìœ„ ì½”ë“œì—ì„œ ì—ëŸ¬ë°”ìš´ë”ë¦¬ ì»´í¬ë„ŒíŠ¸ì˜ ìƒëª…ì£¼ê¸°ëŠ” ì–´ë–»ê²Œ ë ê¹Œ?

[React êµ¬ë²„ì „ ê³µì‹ë¬¸ì„œ](https://ko.legacy.reactjs.org/docs/error-boundaries.html#introducing-error-boundaries)ë¥¼ ì‚´í´ë³´ë©´ ì£¼ì„ìœ¼ë¡œ ì„¤ëª…ë˜ì–´ìˆë‹¤.

1. `getDerivedStateFromError`ê°€ ì—ëŸ¬ê°€ ë°œìƒí–ˆìŒì„ ì¸ì§€í•˜ê³ , ë‹¤ìŒ ë Œë”ë§ì—ì„œ í´ë°± UIê°€ ë³´ì´ë„ë¡ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•œë‹¤.
   - hasError fasle â†’ true
2. `componentDidCatch`ê°€ í˜¸ì¶œë˜ê³ , ì—ëŸ¬ì™€ ì—ëŸ¬ ì •ë³´ë¥¼ ì¶œë ¥í•œë‹¤.
3. `render` ë©”ì„œë“œê°€ í˜¸ì¶œë˜ê³ , Fallback UI ê°€ ë³´ì´ë„ë¡ ë Œë”ë§í•œë‹¤.

ì´ëŒ€ë¡œëŠ” ì¡°ê¸ˆ ì•„ì‰¬ìš°ë‹ˆ, ìœ„ ì½”ë“œë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•„ìš”í•œ ìš”ì†Œë“¤ì„ í•˜ë‚˜ì”© ì¶”ê°€í•´ë³´ì.

---

## renderFallback ë©”ì„œë“œ

í˜„ì¬ëŠ” `render` ë©”ì„œë“œì—ì„œ Fallback UIë¥¼ ì»¤ìŠ¤í…€ í•  ìˆ˜ ì—†ë‹¤.  
ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì¶”ê°€í•´ë³´ì.

```jsx
function RouteComponent() {
  const data = Route.useLoaderData();

  return (
    // ì•„ë˜ì™€ ê°™ì´ renderFallback ë©”ì„œë“œë¥¼ ë„£ì–´ì£¼ê³  ì‹¶ì€ ê²ƒì´ë‹¤.
    <ErrorBoundary renderFallback={() => <div>ì—ëŸ¬ê°€ ë°œìƒí–ˆì–´ìš”.</div>}>
      <div className="flex flex-col items-center justify-center h-full">
        <Bomb shouldThrow={true} />
        <DataTable data={data.data} columns={columns} />
      </div>
    </ErrorBoundary>
  );
}
```

```jsx
import * as React from "react";

interface RenderFallbackProps {
  error: Error;
}

type Props = {
  renderFallback: (props: RenderFallbackProps) => React.ReactNode,
};

interface State {
  error: Error | null;
}

const initialState: State = {
  error: null,
};

export class ErrorBoundary extends React.Component<
  React.PropsWithChildren<Props>,
  State
> {
  state = initialState;

  static getDerivedStateFromError(error: Error) {
    console.log("getDerivedStateFromError", error);

    return { error };
  }

  componentDidCatch(error: Error, info: React.ErrorInfo) {
    console.log("componentDidCatch", error, info);
  }

  render() {
    if (this.state.error !== null) {
      return this.props.renderFallback(this.state.error);
    }

    return this.props.children;
  }
}
```

ì´ë ‡ê²Œ ë„£ê³  ë³´ë‹ˆ, `renderFallback` í†µí•´ Fallback UIê°€ ë Œë”ë§ ë  ê²ƒì´ë‹¤.  
í•œ ê±¸ìŒ ë” ë‚˜ì•„ê°€ì„œ, Fallback UIì— ë²„íŠ¼ì„ ì¶”ê°€í•´ì„œ ì—ëŸ¬ ì´í›„ì˜ ë™ì‘ì„ ì œì–´í•  ìˆ˜ ìˆë„ë¡ í•˜ê³  ì‹¶ë‹¤.

ì´ëŸ´ ë•, `resetErrorBoundary` ë©”ì„œë“œë¥¼ í†µí•´ ì—ëŸ¬ë¥¼ ì´ˆê¸°í™” í•  ìˆ˜ ìˆë‹¤.

```jsx
// ErrorBoundary.tsx
interface RenderFallbackProps {
  error: Error;
  reset: () => void;
}

//...

export class ErrorBoundary extends React.Component<
  React.PropsWithChildren<Props>,
  State
> {
  //...

  // ì—ëŸ¬ë¥¼ ì´ˆê¸°í™” í•  ìˆ˜ ìˆëŠ” ë©”ì„œë“œë¥¼ ì¶”ê°€í•´ì£¼ì—ˆë‹¤.
  resetErrorBoundary() {
    this.setState(initialState);
  }

  render() {
    if (this.state.error !== null) {
      return this.props.renderFallback({
        error: this.state.error,
        reset: this.resetErrorBoundary,
      });
    }

    return this.props.children;
  }
}

// App.tsx
function RouteComponent() {
  const data = Route.useLoaderData();

  return (
    <ErrorBoundary
      // renderFallback ë©”ì„œë“œì— resetì„ ì¶”ê°€í•´ì£¼ì—ˆë‹¤.
      renderFallback={({ error, reset }) => (
        <div>
          <p>{error.message}</p>
          <button onClick={reset}>ì´ˆê¸°í™”</button>
        </div>
      )}
    >
      <div className="flex flex-col items-center justify-center h-full">
        <Bomb shouldThrow={true} />
        <DataTable data={data.data} columns={columns} />
      </div>
    </ErrorBoundary>
  );
}
```

## resetKeys

<SideNote>í•´ë‹¹ ê¸€ì„ ì°¸ê³ í–ˆì–´ìš”. ğŸ™</SideNote>

[resetì„ ì„ ì–¸ì ìœ¼ë¡œ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” ì¸í„°í˜ì´ìŠ¤](https://jbee.io/articles/react/React%EC%97%90%EC%84%9C%20%EC%84%A0%EC%96%B8%EC%A0%81%EC%9C%BC%EB%A1%9C%20%EB%B9%84%EB%8F%99%EA%B8%B0%20%EB%8B%A4%EB%A3%A8%EA%B8%B0#reset%EC%9D%84-%EC%84%A0%EC%96%B8%EC%A0%81%EC%9C%BC%EB%A1%9C-%ED%98%B8%EC%B6%9C%ED%95%A0-%EC%88%98-%EC%9E%88%EB%8A%94-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4)

ì´ ê¸€ì—ì„œ ì œì‹œí•˜ëŠ” resetKeysëŠ” ì–´ë–¤ ê²½ìš°ì— í•„ìš”í•œê±¸ê¹Œ? ì˜ˆì‹œë¥¼ ë§Œë“¤ì–´ë³´ì.

<SandpackWrapper
  files={ERROR_BOUNDARY_NOT_SETTING_RESET_KEYS.files}
  options={{
    editorHeight: 600,
    editorWidthPercentage: 0,
  }}
/>

`User 1`ê³¼ `User 2`ë¥¼ í´ë¦­í•˜ë©´ ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•Šê³ , ì •ìƒì ìœ¼ë¡œ ë™ì‘í•œë‹¤.  
í•˜ì§€ë§Œ, `Error User`ë¥¼ í´ë¦­í•˜ë©´ ì—ëŸ¬ê°€ ë°œìƒí•˜ê³  Error Boundary ì»´í¬ë„ŒíŠ¸ì—ì„œ Fallback UIê°€ ë Œë”ë§ëœë‹¤.

ë‹¤ì‹œ `User 1`ê³¼ `User 2`ë¥¼ í´ë¦­í•˜ë©´ Fallback UIê°€ ì‚¬ë¼ì§ˆ ê²ƒì´ë¼ ì˜ˆìƒí•˜ì§€ë§Œ **ì‚¬ë¼ì§€ì§€ ì•ŠëŠ”ë‹¤.**

Fallback UIë¥¼ ì‚¬ë¼ì§€ê²Œ ë§Œë“¤ê³  ì‹¶ë‹¤ë©´, ìˆ˜ë™ìœ¼ë¡œ ë¦¬ì…‹ ë²„íŠ¼ì„ í´ë¦­í•´ì•¼í•œë‹¤.

<br />

ê·¸ëŸ¼ ì´ì œ `resetKeys`ë¥¼ ì¶”ê°€í•´ë³´ì.

<SandpackWrapper
  files={ERROR_BOUNDARY_SETTING_RESET_KEYS.files}
  options={{
    editorHeight: 600,
    editorWidthPercentage: 0,
  }}
/>

ì˜ˆì‹œì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë“¯ì´, Fallback UIê°€ ë Œë”ë§ ëœ ìƒíƒœì—ì„œ ìˆ˜ë™ìœ¼ë¡œ ë¦¬ì…‹ë²„íŠ¼ì„ í´ë¦­í•˜ì§€ ì•Šê³ , `User 1`ê³¼ `User 2`ë¥¼ í´ë¦­í•˜ë©´ Fallback UIê°€ ì‚¬ë¼ì§€ì§€ ì•ŠëŠ”ë‹¤.

```jsx
// ErrorBoundary.tsx
export class ErrorBoundary extends React.Component<
  React.PropsWithChildren<Props>,
  State
> {
  state = initialState;

  // ...

  componentDidUpdate(prevProps: Props) {
    console.log("componentDidUpdate", prevProps, this.props);
    if (this.state.error == null) {
      return;
    }

    if (isDifferentArray(prevProps.resetKeys, this.props.resetKeys)) {
      this.resetErrorBoundary();
    }
  }

  render() {
    if (this.state.error !== null) {
      return this.props.renderFallback({
        error: this.state.error,
        reset: this.resetErrorBoundary,
      });
    }

    return this.props.children;
  }
}
```

```jsx
// utils.ts
export const isDifferentArray = (a: unknown[], b: unknown[]) => {
  return (
    a.length !== b.length || a.some((item, index) => !Object.is(item, b[index]))
  );
};

// App.tsx
function RouteComponent() {
  const data = Route.useLoaderData();
  const [currentUserId, setCurrentUserId] = useState("user1");

  return (
    <ErrorBoundary
      // resetKeysë¥¼ ì¶”ê°€í•´ì£¼ì—ˆë‹¤.
      resetKeys={[currentUserId]}
      renderFallback={({ error, reset }) => (
        <div className="p-4 border-2 border-red-300 rounded bg-red-50">
          <h2 className="font-bold text-red-700">ì—ëŸ¬ ë°œìƒ</h2>
          <p>{error.message}</p>
          <Button variant="destructive" className="mt-2" onClick={reset}>
            ìˆ˜ë™ìœ¼ë¡œ ë¦¬ì…‹
          </Button>
        </div>
      )}
    >
      <UserDataDisplay userId={currentUserId} />
      <div className="mt-4">
        <DataTable data={data.data} columns={columns} />
      </div>
    </ErrorBoundary>
  );
}
```

<br />

ì¼ë‹¨ ì™œ resetKeysë¥¼ ì¶”ê°€í•´ì•¼ í´ë°± UIê°€ ì‚¬ë¼ì§€ëŠ”ê±¸ê¹Œ?  
ì´ ì´ìœ ëŠ” Error Boundary ì»´í¬ë„ŒíŠ¸ ë‚´ì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí–ˆì„ ë•Œ, ì—ëŸ¬ì— ê´€ë ¨ëœ stateë¥¼ ê´€ë¦¬í•˜ê³  ìˆê¸° ë•Œë¬¸ì´ë‹¤.  
ì¦‰ Errorê°€ ë°œìƒí•˜ë©´ Error Boundaryì—ì„œ catch í•œ ë’¤, stateì— ì—ëŸ¬ì— ëŒ€í•œ ì •ë³´ë¥¼ ë„£ì–´ë†“ëŠ”ë‹¤.

ì´í›„ì— User 1ì´ë‚˜ User 2ë¥¼ í´ë¦­í•˜ë©´, ì´ Error stateê°€ ì´ˆê¸°í™” ë˜ì§€ ì•Šê³  ê·¸ëŒ€ë¡œ ë‚¨ì•„ìˆëŠ” ê²ƒì´ë‹¤.  
ì´ë¥¼ ì´ˆê¸°í™” í•´ì£¼ê¸° ìœ„í•´, componentDidUpdate ë©”ì„œë“œì— ê¸°ì¡´ resetKeysì™€ ì´ì „ prevResetKeysë¥¼ ë¹„êµí•´ì„œ ì´ˆê¸°í™” í•´ì£¼ëŠ” ë¡œì§ì„ ì¶”ê°€í•´ì£¼ì—ˆë‹¤.

## ì°¸ê³ ìë£Œ

[React ê³µì‹ë¬¸ì„œ](https://ko.legacy.reactjs.org/docs/error-boundaries.html)  
[Toss Stack ê³µì‹ ë¬¸ì„œ](https://www.slash.page/ko/)  
[Reactì—ì„œ ì„ ì–¸ì ìœ¼ë¡œ ë¹„ë™ê¸° ë‹¤ë£¨ê¸°](https://jbee.io/articles/react/React%EC%97%90%EC%84%9C%20%EC%84%A0%EC%96%B8%EC%A0%81%EC%9C%BC%EB%A1%9C%20%EB%B9%84%EB%8F%99%EA%B8%B0%20%EB%8B%A4%EB%A3%A8%EA%B8%B0)
