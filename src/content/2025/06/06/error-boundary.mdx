---
date: "2025-06-07"
title: "Error Boundary ì»´í¬ë„ŒíŠ¸"
category: ["ê°œë°œ"]
summary: "Error Boundary ì»´í¬ë„ŒíŠ¸ë¥¼ ì§ì ‘ ë§Œë“¤ì–´ë³´ê³ , ë¡œê·¸ë¥¼ ì°ì–´ë³´ë©° ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•´ë³´ë ¤ê³  í•œë‹¤."
---

import { SandpackWrapper } from "@/components/sandpack";
import {
  ERROR_BOUNDARY_NOT_SETTING_RESET_KEYS,
  ERROR_BOUNDARY_SETTING_RESET_KEYS,
} from "./file";

Error BoundaryëŠ” ë¦¬ì•¡íŠ¸ 16ë²„ì „ë¶€í„° ì¶œì‹œë˜ì—ˆë‹¤.  
ì´ì „ íšŒì‚¬ì—ì„œ ì‚¬ìš©í–ˆë˜ 16.14.2ë²„ì „ì—ì„œë„ Error Boundary ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì—ˆìœ¼ë‚˜, try-catch ë¬¸ì„ í†µí•´ì„œ ì—ëŸ¬ë¥¼ catch í•´ì™”ë‹¤. ëª…ë ¹ì ìœ¼ë¡œ ì½”ë“œë¥¼ ì‘ì„±í–ˆë˜ ê²ƒì´ë‹¤.

ì„ ì–¸ì ìœ¼ë¡œ ì‚¬ìš©í–ˆì—ˆë˜, ê·¸ ì „ íšŒì‚¬ì—ì„œëŠ” Error Boundary ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í–ˆì§€ë§Œ, [react-error-boundary](https://github.com/bvaughn/react-error-boundary)ì— ì˜ì¡´í–ˆë‹¤.

ì•„ì‰½ê²Œë„ ì´ëŸ° ìƒí™©ìœ¼ë¡œ ì¸í•´, Error Boundary ì»´í¬ë„ŒíŠ¸ë¥¼ ì§ì ‘ ë§Œë“¤ì–´ë³´ì§€ ëª»í–ˆë‹¤.  
ì˜¤ëŠ˜ì€ Error Boundary ì»´í¬ë„ŒíŠ¸ë¥¼ ì§ì ‘ ë§Œë“¤ì–´ë³´ê³ , ë¡œê·¸ë¥¼ ì°ì–´ë³´ë©° ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•´ë³´ë ¤ê³  í•œë‹¤.

---

[React ê³µì‹ë¬¸ì„œ](https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary)ì—ì„œ ì œê³µí•˜ëŠ” Error Boundary ì˜ˆì‹œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

```jsx
// ErrorBoundary.tsx
export class ErrorBoundary extends React.Component<
  React.PropsWithChildren,
  { hasError: boolean }
> {
  constructor(props: React.PropsWithChildren) {
    super(props);
    this.state = { hasError: false };
  }

  static getDerivedStateFromError(error: Error) {
    console.log("getDerivedStateFromError", error);

    return { hasError: true };
  }

  componentDidCatch(error: Error, info: React.ErrorInfo) {
    console.log("componentDidCatch", error, info);
  }

  render() {
    if (this.state.hasError) {
      return <div>ì—ëŸ¬ê°€ ë°œìƒí–ˆì–´ìš”.</div>;
    }

    return this.props.children;
  }
}

// App.tsx
function Bomb({ shouldThrow }: { shouldThrow: boolean }) {
  if (shouldThrow) {
    throw new Error("ğŸ’¥ íŠ¹ì • ì¡°ê±´ì—ì„œ ë°œìƒí•œ ì—ëŸ¬!");
  }

  return null;
}

function RouteComponent() {
  const data = Route.useLoaderData();

  return (
    <ErrorBoundary>
      <div className="flex flex-col items-center justify-center h-full">
        <Bomb />
        <DataTable data={data.data} columns={columns} />
      </div>
    </ErrorBoundary>
  );
}
```

ë§Œì•½ ë‹¤ìŒê³¼ ê°™ì€ ì½”ë“œê°€ ìˆë‹¤ê³  ê°€ì •í–ˆì„ ë•Œ, Error Boundary ì»´í¬ë„ŒíŠ¸ì˜ ìƒëª…ì£¼ê¸°ëŠ” ì–´ë–»ê²Œ ë™ì‘í• ê¹Œ?

[React êµ¬ë²„ì „ Docsì—ì„œ Error Boundaryë¥¼ ì†Œê°œí•´ì¤€ë‹¤](https://ko.legacy.reactjs.org/docs/error-boundaries.html#introducing-error-boundaries)

1. getDerivedStateFromErrorê°€ ì—ëŸ¬ê°€ ë°œìƒí–ˆìŒì„ ì¸ì§€í•˜ê³ , ë‹¤ìŒ ë Œë”ë§ì—ì„œ í´ë°± UIê°€ ë³´ì´ë„ë¡ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•œë‹¤. (hasError stateë¥¼ trueë¡œ ë³€ê²½)
2. componentDidCatchê°€ í˜¸ì¶œë˜ê³ , ì—ëŸ¬ì™€ ì—ëŸ¬ ì •ë³´ë¥¼ ì¶œë ¥í•œë‹¤.
3. render ë©”ì„œë“œê°€ í˜¸ì¶œë˜ê³ , í´ë°± UIê°€ ë³´ì´ë„ë¡ ë Œë”ë§í•œë‹¤.

<br />

ì´ëŒ€ë¡œëŠ” ì¡°ê¸ˆ ì•„ì‰¬ìš°ë‹ˆ, ìœ„ ì½”ë“œë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•„ìš”í•œ ìš”ì†Œë“¤ì„ í•˜ë‚˜ì”© ì¶”ê°€í•´ë³´ì.

## renderFallback ë©”ì„œë“œ

í˜„ì¬ëŠ” render ë©”ì„œë“œì—ì„œ í´ë°± UIë¥¼ ì»¤ìŠ¤í…€ í•  ìˆ˜ ì—†ë‹¤.  
ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì¸í„°í˜ì´ìŠ¤(props)ë¥¼ ì¶”ê°€í•´ë³´ì.

```jsx
function RouteComponent() {
  const data = Route.useLoaderData();

  return (
    // ì•„ë˜ì™€ ê°™ì´ renderFallback ë©”ì„œë“œë¥¼ ë„£ì–´ì£¼ê³  ì‹¶ì€ ê²ƒì´ë‹¤.
    <ErrorBoundary renderFallback={() => <div>ì—ëŸ¬ê°€ ë°œìƒí–ˆì–´ìš”.</div>}>
      <div className="flex flex-col items-center justify-center h-full">
        <Bomb shouldThrow={true} />
        <DataTable data={data.data} columns={columns} />
      </div>
    </ErrorBoundary>
  );
}
```

```jsx
import * as React from "react";

interface RenderFallbackProps {
  error: Error;
}

type Props = {
  renderFallback: (props: RenderFallbackProps) => React.ReactNode,
};

interface State {
  error: Error | null;
}

const initialState: State = {
  error: null,
};

export class ErrorBoundary extends React.Component<
  React.PropsWithChildren<Props>,
  State
> {
  state = initialState;

  static getDerivedStateFromError(error: Error) {
    console.log("getDerivedStateFromError", error);
    return { error };
  }

  componentDidCatch(error: Error, info: React.ErrorInfo) {
    console.log("componentDidCatch", error, info);
  }

  render() {
    if (this.state.error !== null) {
      return this.props.renderFallback(this.state.error);
    }

    return this.props.children;
  }
}
```

ì´ë ‡ê²Œ ë„£ê³ ë³´ë‹ˆ, renderFallback ë©”ì„œë“œë¥¼ í†µí•´ í´ë°± UIê°€ ë Œë”ë§ ë í…ë°, ì—¬ê¸°ì— ë²„íŠ¼ì„ ì¶”ê°€í•´ì„œ ì—ëŸ¬ ì´í›„ì˜ ë™ì‘ì„ ì œì–´í•  ìˆ˜ ìˆë„ë¡ í•˜ê³  ì‹¶ë‹¤.  
ì´ëŸ´ ë•, resetErrorBoundary ë©”ì„œë“œë¥¼ í†µí•´ ì—ëŸ¬ë¥¼ ì´ˆê¸°í™” í•  ìˆ˜ ìˆë‹¤.

```jsx
// ErrorBoundary.tsx
interface RenderFallbackProps {
  error: Error;
  reset: () => void;
}

//...

export class ErrorBoundary extends React.Component<
  React.PropsWithChildren<Props>,
  State
> {
  //...

  // ì—ëŸ¬ë¥¼ ì´ˆê¸°í™” í•  ìˆ˜ ìˆëŠ” ë©”ì„œë“œë¥¼ ì¶”ê°€í•´ì£¼ì—ˆë‹¤.
  resetErrorBoundary() {
    this.setState(initialState);
  }

  render() {
    if (this.state.error !== null) {
      return this.props.renderFallback({
        error: this.state.error,
        reset: this.resetErrorBoundary,
      });
    }

    return this.props.children;
  }
}

// App.tsx
function RouteComponent() {
  const data = Route.useLoaderData();

  return (
    <ErrorBoundary
      // renderFallback ë©”ì„œë“œì— resetì„ ì¶”ê°€í•´ì£¼ì—ˆë‹¤.
      renderFallback={({ error, reset }) => (
        <div>
          <p>{error.message}</p>
          <button onClick={reset}>ì´ˆê¸°í™”</button>
        </div>
      )}
    >
      <div className="flex flex-col items-center justify-center h-full">
        <Bomb shouldThrow={true} />
        <DataTable data={data.data} columns={columns} />
      </div>
    </ErrorBoundary>
  );
}
```

<br />

ì—¬ê¸°ê¹Œì§€ ë§Œë“  ìƒíƒœì—ì„œ ë³¸ê²©ì ìœ¼ë¡œ ì´ ê¸€ì—ì„œ ì œì‹œí•˜ê³  ì‹¶ì—ˆë˜ ë‚´ìš©ì„ ì ì–´ë³´ë ¤ê³  í•œë‹¤.

[resetì„ ì„ ì–¸ì ìœ¼ë¡œ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” ì¸í„°í˜ì´ìŠ¤](https://jbee.io/articles/react/React%EC%97%90%EC%84%9C%20%EC%84%A0%EC%96%B8%EC%A0%81%EC%9C%BC%EB%A1%9C%20%EB%B9%84%EB%8F%99%EA%B8%B0%20%EB%8B%A4%EB%A3%A8%EA%B8%B0#reset%EC%9D%84-%EC%84%A0%EC%96%B8%EC%A0%81%EC%9C%BC%EB%A1%9C-%ED%98%B8%EC%B6%9C%ED%95%A0-%EC%88%98-%EC%9E%88%EB%8A%94-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4)

ì—¬ê¸°ì„œ ì œì‹œí•˜ëŠ” resetKeyëŠ” ì–´ë–¤ ê²½ìš°ì— í•„ìš”í•œê±¸ê¹Œ? ì˜ˆì‹œë¥¼ ë§Œë“¤ì–´ë³´ì.

<SandpackWrapper
  files={ERROR_BOUNDARY_NOT_SETTING_RESET_KEYS.files}
  options={{
    editorHeight: 600,
  }}
/>

User 1ê³¼ User 2ë¥¼ í´ë¦­í•˜ë©´ ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•Šê³ , ì •ìƒì ìœ¼ë¡œ ë™ì‘í•œë‹¤.  
í•˜ì§€ë§Œ, Error Userë¥¼ í´ë¦­í•˜ë©´ ì—ëŸ¬ê°€ ë°œìƒí•˜ê³  Error Boundary ì»´í¬ë„ŒíŠ¸ì—ì„œ í´ë°± UIê°€ ë Œë”ë§ëœë‹¤.

ì´í›„ ë‹¤ì‹œ User 1ê³¼ User 2ë¥¼ í´ë¦­í•˜ë©´ ì—ëŸ¬ í´ë°± UIê°€ ì‚¬ë¼ì§ˆ ê²ƒì´ë¼ ì˜ˆìƒí•˜ì§€ë§Œ ê·¸ë ‡ê²Œ ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤.  
ì—ëŸ¬ í´ë°± UIë¥¼ ì‚¬ë¼ì§€ê²Œ ë§Œë“¤ê³  ì‹¶ë‹¤ë©´, User 1, User 2ë¥¼ í´ë¦­í•œ ìƒíƒœì—ì„œ, ìˆ˜ë™ìœ¼ë¡œ "ë¦¬ì…‹í•˜ê¸°" ë²„íŠ¼ì„ í´ë¦­í•´ì•¼í•œë‹¤.

User 1ê³¼ User 2ë¥¼ í´ë¦­í–ˆì„ ë•Œ, ì—ëŸ¬ í´ë°± UIê°€ ì‚¬ë¼ì§€ë„ë¡ ë§Œë“¤ ìˆœ ì—†ì„ê¹Œ? ì´ë¥¼ ìœ„í•´ resetKeysê°€ ì¶”ê°€ëœ ê²ƒì´ë‹¤.

<br />

ì¼ë‹¨ ì™œ resetKeysë¥¼ ì¶”ê°€í•´ì•¼ í´ë°± UIê°€ ì‚¬ë¼ì§€ëŠ”ê±¸ê¹Œ?  
ì´ ì´ìœ ëŠ” Error Boundary ì»´í¬ë„ŒíŠ¸ ë‚´ì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí–ˆì„ ë•Œ, ì—ëŸ¬ì— ê´€ë ¨ëœ stateë¥¼ ê´€ë¦¬í•˜ê³  ìˆê¸° ë•Œë¬¸ì´ë‹¤.  
ì¦‰ Errorê°€ ë°œìƒí•˜ë©´ Error Boundaryì—ì„œ catch í•œ ë’¤, stateì— ì—ëŸ¬ì— ëŒ€í•œ ì •ë³´ë¥¼ ë„£ì–´ë†“ëŠ”ë‹¤.

ì´í›„ì— User 1ì´ë‚˜ User 2ë¥¼ í´ë¦­í•˜ë©´, ì´ Error stateê°€ ì´ˆê¸°í™” ë˜ì§€ ì•Šê³  ê·¸ëŒ€ë¡œ ë‚¨ì•„ìˆëŠ” ê²ƒì´ë‹¤.  
ì´ë¥¼ ì´ˆê¸°í™” í•´ì£¼ê¸° ìœ„í•´, componentDidUpdate ë©”ì„œë“œì— ê¸°ì¡´ resetKeysì™€ ì´ì „ prevResetKeysë¥¼ ë¹„êµí•´ì„œ ì´ˆê¸°í™” í•´ì£¼ëŠ” ë¡œì§ì„ ì¶”ê°€í•´ì£¼ì—ˆë‹¤.

```jsx
// ErrorBoundary.tsx
export class ErrorBoundary extends React.Component<
  React.PropsWithChildren<Props>,
  State
> {
  state = initialState;

  // ...

  componentDidUpdate(prevProps: Props) {
    console.log("componentDidUpdate", prevProps, this.props);
    if (this.state.error == null) {
      return;
    }

    if (isDifferentArray(prevProps.resetKeys, this.props.resetKeys)) {
      this.resetErrorBoundary();
    }
  }

  render() {
    if (this.state.error !== null) {
      return this.props.renderFallback({
        error: this.state.error,
        reset: this.resetErrorBoundary,
      });
    }

    return this.props.children;
  }
}
```

```jsx
// utils.ts
export const isDifferentArray = (a: unknown[], b: unknown[]) => {
  return (
    a.length !== b.length || a.some((item, index) => !Object.is(item, b[index]))
  );
};

// App.tsx
function RouteComponent() {
  const data = Route.useLoaderData();
  const [currentUserId, setCurrentUserId] = useState("user1");

  return (
    <ErrorBoundary
      // resetKeysë¥¼ ì¶”ê°€í•´ì£¼ì—ˆë‹¤.
      resetKeys={[currentUserId]}
      renderFallback={({ error, reset }) => (
        <div className="p-4 border-2 border-red-300 rounded bg-red-50">
          <h2 className="font-bold text-red-700">ì—ëŸ¬ ë°œìƒ</h2>
          <p>{error.message}</p>
          <Button variant="destructive" className="mt-2" onClick={reset}>
            ìˆ˜ë™ìœ¼ë¡œ ë¦¬ì…‹
          </Button>
        </div>
      )}
    >
      <UserDataDisplay userId={currentUserId} />
      <div className="mt-4">
        <DataTable data={data.data} columns={columns} />
      </div>
    </ErrorBoundary>
  );
}
```

<br />

<SandpackWrapper
  files={ERROR_BOUNDARY_SETTING_RESET_KEYS.files}
  options={{
    editorHeight: 600,
  }}
/>
